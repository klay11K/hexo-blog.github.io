<!DOCTYPE html>
<html lang=zh>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>redis 学习笔记 | klay的知识星球</title>
  <meta name="description" content="NoSQL概述为什么要用NoSQL？用户的个人信息，社交网络，地理位置。用户自己产生的数据，用户日志等等爆发式增长！ 这时候我们就需要使用NoSQL数据库，NoSQL可以很好的处理以上情况！ 什么是NoSQLNoSQL &#x3D; Not Only SQL（不仅仅是SQL） 关系型数据库：表格，行和列 泛指非关系型数据库 随着web2.0互联网的诞生！传统的关系型数据库很难对付web2.0时代！尤其是超大">
<meta property="og:type" content="article">
<meta property="og:title" content="redis 学习笔记">
<meta property="og:url" content="http://example.com/2024/10/16/redis/redis/index.html">
<meta property="og:site_name" content="努力沉淀">
<meta property="og:description" content="NoSQL概述为什么要用NoSQL？用户的个人信息，社交网络，地理位置。用户自己产生的数据，用户日志等等爆发式增长！ 这时候我们就需要使用NoSQL数据库，NoSQL可以很好的处理以上情况！ 什么是NoSQLNoSQL &#x3D; Not Only SQL（不仅仅是SQL） 关系型数据库：表格，行和列 泛指非关系型数据库 随着web2.0互联网的诞生！传统的关系型数据库很难对付web2.0时代！尤其是超大">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/C:/Users/a/AppData/Roaming/Typora/typora-user-images/image-20210815231124232.png">
<meta property="article:published_time" content="2024-10-16T09:08:29.106Z">
<meta property="article:modified_time" content="2024-10-16T09:23:59.225Z">
<meta property="article:author" content="klay">
<meta property="article:tag" content="redis">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/C:/Users/a/AppData/Roaming/Typora/typora-user-images/image-20210815231124232.png">
  <!-- Canonical links -->
  <link rel="canonical" href="http://example.com/2024/10/16/redis/redis/index.html">
  
    <link rel="alternate" href="/atom.xml" title="努力沉淀" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
  
<meta name="generator" content="Hexo 5.4.2"></head>


<body class="main-center" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="搜索" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav ">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">首页</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">归档</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">分类</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-tags">
          <a href="/tags">
            
            <i class="icon icon-tags"></i>
            
            <span class="menu-title">标签</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/klay11K/klay11K.github.io" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">公告</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p>欢迎交流与分享经验!</p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">分类</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/HTML/">HTML</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java%E5%9F%BA%E7%A1%80/">Java基础</a><span class="category-list-count">5</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Java%E5%9F%BA%E7%A1%80/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/">函数式编程</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java%E5%9F%BA%E7%A1%80/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL/">MySQL</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/PDF/">PDF</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/openGauss/">openGauss</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/redis/">redis</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/">微信小程序</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">计算机基础</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/">踩坑记录</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">标签</h3>
    <div class="widget-body">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/" rel="tag">HTML</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java%E5%9F%BA%E7%A1%80/" rel="tag">Java基础</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java%E9%9B%86%E5%90%88/" rel="tag">Java集合</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Junit/" rel="tag">Junit</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PDF/" rel="tag">PDF</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/" rel="tag">github</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/openGauss/" rel="tag">openGauss</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/" rel="tag">redis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" rel="tag">函数式编程</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" rel="tag">微信小程序</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" rel="tag">计算机基础</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" rel="tag">计算机网络</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">标签云</h3>
    <div class="widget-body tagcloud">
      <a href="/tags/HTML/" style="font-size: 13px;">HTML</a> <a href="/tags/Hexo/" style="font-size: 14px;">Hexo</a> <a href="/tags/Java%E5%9F%BA%E7%A1%80/" style="font-size: 13.67px;">Java基础</a> <a href="/tags/Java%E9%9B%86%E5%90%88/" style="font-size: 13px;">Java集合</a> <a href="/tags/Junit/" style="font-size: 13px;">Junit</a> <a href="/tags/Linux/" style="font-size: 13px;">Linux</a> <a href="/tags/MySQL/" style="font-size: 13.67px;">MySQL</a> <a href="/tags/PDF/" style="font-size: 13px;">PDF</a> <a href="/tags/docker/" style="font-size: 13px;">docker</a> <a href="/tags/github/" style="font-size: 13px;">github</a> <a href="/tags/openGauss/" style="font-size: 13.33px;">openGauss</a> <a href="/tags/redis/" style="font-size: 13px;">redis</a> <a href="/tags/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" style="font-size: 13px;">函数式编程</a> <a href="/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" style="font-size: 13px;">微信小程序</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" style="font-size: 13px;">计算机基础</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" style="font-size: 13px;">计算机网络</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 13px;">设计模式</a>
    </div>
  </div>

    
      
  <div class="widget">
    <h3 class="widget-title">归档</h3>
    <div class="widget-body">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/11/">十一月 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/10/">十月 2024</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">六月 2023</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">五月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">四月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">二月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">一月 2023</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">十二月 2022</a><span class="archive-list-count">4</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/MySQL/">MySQL</a>
              </p>
              <p class="item-title">
                <a href="/2024/11/12/MySQL/mysql-%E9%9D%A2%E8%AF%95%E9%A2%98/" class="title">MySQL 进阶</a>
              </p>
              <p class="item-date">
                <time datetime="2024-11-12T01:22:52.025Z" itemprop="datePublished">2024-11-12</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/MySQL/">MySQL</a>
              </p>
              <p class="item-title">
                <a href="/2024/10/24/MySQL/mysql-%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/" class="title">MySQL 基本语法</a>
              </p>
              <p class="item-date">
                <time datetime="2024-10-24T01:34:06.162Z" itemprop="datePublished">2024-10-24</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/MySQL/">MySQL</a>
              </p>
              <p class="item-title">
                <a href="/2024/10/24/MySQL/mysql-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" class="title">MySQL 常用命令</a>
              </p>
              <p class="item-date">
                <time datetime="2024-10-24T01:34:03.049Z" itemprop="datePublished">2024-10-24</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/redis/">redis</a>
              </p>
              <p class="item-title">
                <a href="/2024/10/16/redis/redis/" class="title">redis 学习笔记</a>
              </p>
              <p class="item-date">
                <time datetime="2024-10-16T09:08:29.106Z" itemprop="datePublished">2024-10-16</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/openGauss/">openGauss</a>
              </p>
              <p class="item-title">
                <a href="/2024/10/16/openGauss/opengauss%E5%91%BD%E4%BB%A4%E5%90%88%E9%9B%86/" class="title">oepnGauss 命令合集</a>
              </p>
              <p class="item-date">
                <time datetime="2024-10-16T08:55:57.217Z" itemprop="datePublished">2024-10-16</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
  <aside class="sidebar sidebar-toc collapse   in  " id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    <nav id="toc" class="article-toc">
      <h3 class="toc-title">文章目录</h3>
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#NoSQL%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">NoSQL概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E7%94%A8NoSQL%EF%BC%9F"><span class="toc-number">1.1.</span> <span class="toc-text">为什么要用NoSQL？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFNoSQL"><span class="toc-number">1.2.</span> <span class="toc-text">什么是NoSQL</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#NoSQL%E7%9A%84%E5%9B%9B%E5%A4%A7%E5%88%86%E7%B1%BB"><span class="toc-number">1.3.</span> <span class="toc-text">NoSQL的四大分类</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Redis%E5%85%A5%E9%97%A8"><span class="toc-number">2.</span> <span class="toc-text">Redis入门</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">2.1.</span> <span class="toc-text">概述</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Linux%E5%AE%89%E8%A3%85"><span class="toc-number">3.</span> <span class="toc-text">Linux安装</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E6%80%A7%E8%83%BD"><span class="toc-number">4.</span> <span class="toc-text">测试性能</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="toc-number">5.</span> <span class="toc-text">基础知识</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">6.</span> <span class="toc-text">五大数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Redis-Key"><span class="toc-number">6.1.</span> <span class="toc-text">Redis-Key</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#String%EF%BC%88%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%89"><span class="toc-number">6.2.</span> <span class="toc-text">String（字符串）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#List%EF%BC%88%E5%88%97%E8%A1%A8%EF%BC%89"><span class="toc-number">6.3.</span> <span class="toc-text">List（列表）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Set-%E9%9B%86%E5%90%88"><span class="toc-number">6.4.</span> <span class="toc-text">Set(集合)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hash%EF%BC%88%E5%93%88%E5%B8%8C%EF%BC%89"><span class="toc-number">6.5.</span> <span class="toc-text">Hash（哈希）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ZSet%EF%BC%88%E6%9C%89%E5%BA%8F%E9%9B%86%E5%90%88%EF%BC%89"><span class="toc-number">6.6.</span> <span class="toc-text">ZSet（有序集合）</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E7%A7%8D%E7%89%B9%E6%AE%8A%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">7.</span> <span class="toc-text">三种特殊数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#geospatial%EF%BC%88%E5%9C%B0%E7%90%86%E4%BD%8D%E7%BD%AE%EF%BC%89"><span class="toc-number">7.1.</span> <span class="toc-text">geospatial（地理位置）</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SpringBoot%E6%95%B4%E5%90%88"><span class="toc-number">8.</span> <span class="toc-text">SpringBoot整合</span></a></li></ol>
    </nav>
  </div>
</aside>

<main class="main" role="main">
  <div class="content">
  <article id="post-redis/redis" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      redis 学习笔记
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/2024/10/16/redis/redis/" class="article-date">
	  <time datetime="2024-10-16T09:08:29.106Z" itemprop="datePublished">2024-10-16</time>
	</a>
</span>
        
  <span class="article-category">
    <i class="icon icon-folder"></i>
    <a class="article-category-link" href="/categories/redis/">redis</a>
  </span>

        
  <span class="article-tag">
    <i class="icon icon-tags"></i>
	<a class="article-tag-link-link" href="/tags/redis/" rel="tag">redis</a>
  </span>


        
	<span class="article-read hidden-xs">
	    <i class="icon icon-eye-fill" aria-hidden="true"></i>
	    <span id="busuanzi_container_page_pv">
			<span id="busuanzi_value_page_pv">0</span>
		</span>
	</span>


        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2024/10/16/redis/redis/#comments" class="article-comment-link">评论</a></span>
        
      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <h1 id="NoSQL概述"><a href="#NoSQL概述" class="headerlink" title="NoSQL概述"></a>NoSQL概述</h1><h2 id="为什么要用NoSQL？"><a href="#为什么要用NoSQL？" class="headerlink" title="为什么要用NoSQL？"></a>为什么要用NoSQL？</h2><p>用户的个人信息，社交网络，地理位置。用户自己产生的数据，用户日志等等爆发式增长！</p>
<p>这时候我们就需要使用NoSQL数据库，NoSQL可以很好的处理以上情况！</p>
<h2 id="什么是NoSQL"><a href="#什么是NoSQL" class="headerlink" title="什么是NoSQL"></a>什么是NoSQL</h2><p>NoSQL = Not Only SQL（不仅仅是SQL）</p>
<p>关系型数据库：表格，行和列</p>
<p>泛指非关系型数据库 随着web2.0互联网的诞生！传统的关系型数据库很难对付web2.0时代！尤其是超大规模的高并发的社区！NoSQL在当今大数据环境下发展十分迅速，Redis是发展最快的，而且也是我们当前必须要掌握的技术！</p>
<blockquote>
<p>NoSQL特点</p>
</blockquote>
<ol>
<li><p>方便扩展（数据之间没有关系，很好扩展！）</p>
</li>
<li><p>大数据量高性能（Redis一秒可以写8万次，读11万，NoSQL的缓存记录级，是一种细粒度的缓存，性能会比较高！）</p>
</li>
<li><p>数据类型是多样型的！（不需要事先设计数据库！随取随用！如果是数据量十分大的一些表，很多人就无法设计了）</p>
</li>
<li><p>传统的RDBMS和NoSQL</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">传统的 RDBMS</span><br><span class="line">- 结构化组织</span><br><span class="line">- SQL</span><br><span class="line">- 数据和关系都存在单独的表中</span><br><span class="line">- 操作操作，数据定义语言</span><br><span class="line">- 严格的一致性</span><br><span class="line">- 基础的事务</span><br><span class="line">- ....</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">NoSQL</span><br><span class="line">- 不仅仅是数据</span><br><span class="line">- 没有固定的查询语言</span><br><span class="line">- 键值对存储，列存储，文档存储，图形数据库（社交关系）</span><br><span class="line">- 最终一致性</span><br><span class="line">- CAP定理 和 BASE理论（异地多活！）</span><br><span class="line">- 高性能、高可用、高可扩</span><br><span class="line">- ....</span><br></pre></td></tr></table></figure></li>
</ol>
<blockquote>
<p>了解：3V+3高</p>
</blockquote>
<p>大数据时代的3V：主要是描述问题的</p>
<ol>
<li>海量Volume</li>
<li>多样Variety</li>
<li>实时Velocity</li>
</ol>
<p>大数据时代的3高：主要是对程序的要求</p>
<ol>
<li>高并发（）</li>
<li>高可扩（随时水平拆分，机器不够了，可用扩展机器来解决）</li>
<li>高性能（保证用户体验和性能！）</li>
</ol>
<p>真正在公司中的实践：NoSQL + RDBMS一起使用才是最强的，阿里巴巴的架构演进！</p>
<p>技术没有高低之分，就看你如何去使用！（提升内功，思维的提高！）</p>
<h2 id="NoSQL的四大分类"><a href="#NoSQL的四大分类" class="headerlink" title="NoSQL的四大分类"></a>NoSQL的四大分类</h2><p><strong>KV键值对</strong>：</p>
<ul>
<li>新浪：Redis</li>
<li>美团：Redis+Tair</li>
<li>阿里、百度：Redis+memecache</li>
</ul>
<p><strong>文档型数据库（bson格式和json一样）</strong></p>
<ul>
<li>MongoDB（一般必须要掌握）<ul>
<li>MongoDB是一个基于分布式文件存储的数据库，C++编写，主要用来处理大量的文档！</li>
<li>MongoDB是一个介于关系型数据库和非关系型数据库中中间产品！MongoDB是非关系型数据库中功能最丰富，最像关系型数据库的！</li>
</ul>
</li>
<li>ConthDB</li>
</ul>
<p><strong>列存储数据库</strong></p>
<ul>
<li>HBase</li>
<li>分布式文件系统</li>
</ul>
<p><strong>图关系数据库</strong></p>
<ul>
<li>他不是存图形，放的是关系，比如：朋友圈社交网络，广告推荐！</li>
<li>Neo4j，InfoGrid；</li>
</ul>
<h1 id="Redis入门"><a href="#Redis入门" class="headerlink" title="Redis入门"></a>Redis入门</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><blockquote>
<p>reids是什么？</p>
</blockquote>
<p>Redis(Remote Dictionary Server)，远程字典服务！</p>
<p>是一个开源的使用ANSI C语言编写、支持网络、可基于内存亦可持久化的日志型、key-value数据库，并提高多种语言的API。</p>
<p>免费和开源！是当下最热门的NoSQL技术之一！也被人们称之为结构化数据库！</p>
<blockquote>
<p>Redis能干嘛？</p>
</blockquote>
<ol>
<li>内存存储、持久化，内存中是断电即失，所以持久化很重要（rdb、aof）</li>
<li>效率高，可以用于高速缓存</li>
<li>发布订阅系统</li>
<li>地图信息分析</li>
<li>计时器、计数器（浏览量！）</li>
<li>….</li>
</ol>
<blockquote>
<p>特性</p>
</blockquote>
<ol>
<li>多样 的数据类型</li>
<li>持久化</li>
<li>集群</li>
<li>事务</li>
<li>….</li>
</ol>
<h1 id="Linux安装"><a href="#Linux安装" class="headerlink" title="Linux安装"></a>Linux安装</h1><ol>
<li><p>去官网下载Redis安装包</p>
</li>
<li><p>解压安装包！程序一般放在/opt</p>
</li>
<li><p>tar -zxvf redis包</p>
</li>
<li><p>进入解压后的文件，基本的环境安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.yum install gcc-c++</span><br><span class="line">2.gcc -v</span><br><span class="line">3.make</span><br><span class="line">4.make install</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>redis的默认安装路径<code>/usr/local/bin</code></p>
</li>
<li><p>将redis配置文件复制到我们的目录下</p>
</li>
<li><p>redis默认不是后台启动的，修改配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">daemonize no 改为<span class="built_in">yes</span> <span class="comment">#开启守护进程</span></span><br></pre></td></tr></table></figure></li>
<li><p>启动redis服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#通过指定的配置文件启动redis服务</span></span><br><span class="line">redis-server /kconfig/redis.conf</span><br><span class="line"><span class="comment">#使用redis客户端进行连接</span></span><br><span class="line">redis-cli -p 6379</span><br><span class="line">ping</span><br><span class="line"><span class="built_in">set</span> name klay</span><br><span class="line">get name</span><br><span class="line">keys *</span><br></pre></td></tr></table></figure></li>
<li><p>使用redis-cli连接测试</p>
</li>
<li><p>查看redis的进程是否开启</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef|grep redis</span><br></pre></td></tr></table></figure></li>
<li><p>关闭redis服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shutdown</span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure></li>
<li><p>再次查看进程是否存在</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef|grep redis</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="测试性能"><a href="#测试性能" class="headerlink" title="测试性能"></a>测试性能</h1><p><strong>redis-benchmark</strong>是一个压力测试工具</p>
<p>简单测试：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#测试：100个并发连接  100000个请求</span></span><br><span class="line">redis-benchmark -h localhost -p 6379 -c 100 -n 100000</span><br></pre></td></tr></table></figure>

<p>如何查看分析</p>
<h1 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h1><p>redis默认有16个数据库 </p>
<p>默认使用的是第0个，可以使用 select切换数据库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#切换数据库</span></span><br><span class="line">select 3</span><br><span class="line"><span class="comment">#查看数据库所有的key</span></span><br><span class="line">keys *</span><br><span class="line"><span class="comment">#清空当前数据库</span></span><br><span class="line">flushdb</span><br><span class="line"><span class="comment">#清空所有数据库</span></span><br><span class="line">flushAll</span><br></pre></td></tr></table></figure>

<p>思考：为什么redis是6379（明星的缩写，粉丝效应）</p>
<blockquote>
<p>redis是单线程的</p>
</blockquote>
<p>redis是很快的，官方表示，redis是基于内存操作的，CPU不是redis性能瓶颈，redis的瓶颈是根据机器的内存和网络带宽，既然可以使用单线程来实现，就使用单线程了！所以就使用了单线程！</p>
<p>redis是C语言写的，官方提高的数据为100000+的QPS，完全不比同样是使用key-value的Memecache差！</p>
<p><strong>redis为什么单线程还这么快？</strong></p>
<ol>
<li>误区1：高性能的服务器一定是多线程的</li>
<li>误区2：多线程（CPU上下文切换！）一定比单线程效率高</li>
</ol>
<p>CPU、内存、硬盘的速度要有所了解</p>
<p>核心：redis是将所有的数据全部放在内存中的，所以说使用单线程去操作效率就是最高的，多线程（CPU上下文切换：耗时的操作），对于内存系统来说，如果没有上下文切换效率就是最高的！多次读写都是在一个CPU上的，在内存情况下，这个就是最佳的方案！</p>
<h1 id="五大数据类型"><a href="#五大数据类型" class="headerlink" title="五大数据类型"></a>五大数据类型</h1><p>Redis 是一种开源（BSD 许可）、内存中数据结构存储，用作数据库、缓存和消息代理。Redis 提供了诸如字符串(String)、散列(Hash)、列表(List)、集合(Set)、带范围查询的排序集合(ZSet)、位图、超级日志、地理空间索引和流等数据结构。Redis 内置复制、Lua 脚本、LRU 驱逐、事务和不同级别的磁盘持久化，并通过 Redis Sentinel 和 Redis Cluster 自动分区提供高可用性。</p>
<h2 id="Redis-Key"><a href="#Redis-Key" class="headerlink" title="Redis-Key"></a>Redis-Key</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看所有key</span></span><br><span class="line">keys *</span><br><span class="line"><span class="comment">#添加一个key-value</span></span><br><span class="line"><span class="built_in">set</span> key value</span><br><span class="line"><span class="comment">#获取value</span></span><br><span class="line">get key</span><br><span class="line"><span class="comment">#判定key是否存在，返回0或1</span></span><br><span class="line">exists key</span><br><span class="line"><span class="comment">#移除key，返回0或1</span></span><br><span class="line">move key 1代表当前库</span><br><span class="line"><span class="comment">#设置key的过期时间</span></span><br><span class="line">expire name 10</span><br><span class="line"><span class="comment">#查看当前key的剩余时间</span></span><br><span class="line">ttl key</span><br><span class="line"><span class="comment">#查看当前key是什么类型</span></span><br><span class="line"><span class="built_in">type</span> key</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>如果遇见不会的命令，查询Redis的官方文档</p>
<h2 id="String（字符串）"><a href="#String（字符串）" class="headerlink" title="String（字符串）"></a>String（字符串）</h2><p>90%的java程序员使用redis只会使用一个String类型！</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#字符串追加，如果没有该key则创建</span></span><br><span class="line">append key value</span><br><span class="line"><span class="comment">#获取字符串长度</span></span><br><span class="line">strlen key</span><br><span class="line"><span class="comment">#自动加一</span></span><br><span class="line">incr key</span><br><span class="line"><span class="comment">#自动减一</span></span><br><span class="line">decr key</span><br><span class="line"><span class="comment">#步长操作</span></span><br><span class="line">incrby key 10 <span class="comment">#加10</span></span><br><span class="line">decrby key 10 <span class="comment">#减10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#截取字符串</span></span><br><span class="line">getrange key 0 3 <span class="comment">#获取下标0-3的字符</span></span><br><span class="line">getrange key 0 -1 <span class="comment">#获取全部字符</span></span><br><span class="line"><span class="comment">#替换字符串</span></span><br><span class="line">setrange key 0 xx <span class="comment">#替换指定位置开始的字符串</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#setex(set with expire) 设置过期时间</span></span><br><span class="line">setex key 30 hello <span class="comment">#设置key value为hello 30秒后过期</span></span><br><span class="line">ttl key </span><br><span class="line"><span class="comment">#setnx(set if not exist) key不存在再创建，存在则创建失败（在分布式锁中会常常使用！）</span></span><br><span class="line">setnx key value</span><br><span class="line"></span><br><span class="line"><span class="comment">#批量设置值</span></span><br><span class="line">mset k1 v1 k2 v2 k3 v3 </span><br><span class="line"><span class="comment">#批量获取值</span></span><br><span class="line">mget k1 k2 k3</span><br><span class="line"><span class="comment">#不存在则设值，原子性操作，要么都成功，要么都失败</span></span><br><span class="line">msetnx k1 v1 k2 v2 k3 v3</span><br><span class="line"></span><br><span class="line"><span class="comment">#对象</span></span><br><span class="line"><span class="built_in">set</span> user:1&#123;name:张三,age:3&#125; <span class="comment">#设置一个user:1对象，值为json字符串，来保存一个对象</span></span><br><span class="line"><span class="comment">#这里的key是一个巧妙的设计：user:&#123;id&#125;:&#123;filed&#125;，如此设计在redis中是完全ok的</span></span><br><span class="line">mset user:1:name 张三 user:1:age 2</span><br><span class="line">mget user:1:name user:1:age</span><br><span class="line"></span><br><span class="line"><span class="comment">#先get然后再set，如果不存在值则返回null，如果存在则获取原来的值，并设置新的值</span></span><br><span class="line">getset db redis </span><br><span class="line">getset dh mongdb</span><br></pre></td></tr></table></figure>

<p>数据结构是相通的！</p>
<p>String类似的使用场景：value除了是我们的字符串还可以是我们的数字！</p>
<ul>
<li>计算器</li>
<li>统计多单位的数量 uid:用户id:follow 0</li>
<li>粉丝数</li>
<li>对象缓存存储</li>
</ul>
<h2 id="List（列表）"><a href="#List（列表）" class="headerlink" title="List（列表）"></a>List（列表）</h2><p>基本的数据类型，列表，元素可重复，有序</p>
<p>在redis里，我们可以把list玩成，栈，队列、堵塞队列</p>
<p>所有的list命令都是用l来开头的</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#push操作</span></span><br><span class="line">lpush key value <span class="comment">#将一个值或者多个值，插入到列表的头部</span></span><br><span class="line">rpush key value <span class="comment">#插入到列表的尾部</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#获取list的值</span></span><br><span class="line">lrange list 0 -1 <span class="comment">#获取全部</span></span><br><span class="line">lrange list 0 1 <span class="comment">#通过区间获取具体的值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#移除元素</span></span><br><span class="line">lpop key <span class="comment">#从头部移除</span></span><br><span class="line">rpop key <span class="comment">#从尾部移除</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#获取元素</span></span><br><span class="line">lindex key index <span class="comment">#通过下标获取list中的某一个值</span></span><br><span class="line"><span class="comment">#获取列表的长度</span></span><br><span class="line">llen key </span><br><span class="line"></span><br><span class="line"><span class="comment">#移除指定的值</span></span><br><span class="line">lrem key 1 value <span class="comment">#移除列表一个指定的value</span></span><br><span class="line">lrem key 2 value <span class="comment">#移除列表两个指定的value</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#保存某一部分的元素</span></span><br><span class="line">ltrim key 1 2 <span class="comment">#通过下标截取指定的长度，这个list已经被改变了，只剩下截取的元素</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#移除列表的最后一个元素，将他移动到新的列表中</span></span><br><span class="line">rpoplpush <span class="built_in">source</span> target <span class="comment">#从source列表移除，并且将该元素添加到target列表</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#将列表指定下标的值，替换为另外一个值，更新操作</span></span><br><span class="line">exists list <span class="comment">#判断这个列表是否存在</span></span><br><span class="line">lset list 0 item <span class="comment">#如果不存在更新就报错，如果存在，则更新当前下标的值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#将某一个具体的value插入到列表中某个元素的前面或者后面</span></span><br><span class="line">linsert key before world other <span class="comment">#在指定value之前插入other</span></span><br><span class="line">linsert key after world other <span class="comment">#在指定value之后插入other</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>小结</p>
</blockquote>
<ul>
<li>它实际上是一个链表，before Node after，left，right都可以插入值</li>
<li>如果key不存在，创建新的链表</li>
<li>如果key存在，新增内容</li>
<li>如果移除了所有的值，空链表，也代表不存在！</li>
<li>在两边插入或者改动值效率最高！中间元素，效率相对偏低</li>
</ul>
<p>消息排队！消息队列(lpush rpop)  栈(lpush lpop)</p>
<h2 id="Set-集合"><a href="#Set-集合" class="headerlink" title="Set(集合)"></a>Set(集合)</h2><p>set中的值是不可重复的，无序</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#添加元素</span></span><br><span class="line">sadd key vlaue</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看指定set的所有元素</span></span><br><span class="line">smembers key</span><br><span class="line"></span><br><span class="line"><span class="comment">#判断某一个值是否在中</span></span><br><span class="line">sismember key hello <span class="comment">#hello是否存在在集合中</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#获取set集合中的个数</span></span><br><span class="line">scard key </span><br><span class="line"></span><br><span class="line"><span class="comment">#移除set集合中的指定元素</span></span><br><span class="line">srem key hello <span class="comment">#移除hello元素</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#set 无序不重复集合，抽随机</span></span><br><span class="line">srandmember key <span class="comment">#随机抽选出一个选择</span></span><br><span class="line">srandmember key 2 <span class="comment">#随机选出两个元素</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#随机删除集合中的元素</span></span><br><span class="line">spop key</span><br><span class="line">spop key 2</span><br><span class="line"><span class="comment">#将指定的一个值移动到另一个集合中</span></span><br><span class="line">smove <span class="built_in">source</span> target hello <span class="comment">#将hello移动到指定的集合中</span></span><br><span class="line"></span><br><span class="line">微博，B站，共同关注（交集）</span><br><span class="line">数字集合类：</span><br><span class="line">- 差集</span><br><span class="line">- 交集</span><br><span class="line">- 并集</span><br><span class="line"></span><br><span class="line">sdiff key1 key2 <span class="comment">#求两个集合中的差集 不同的</span></span><br><span class="line">sinter key1 key2 <span class="comment">#求两个集合中的交集 相同的 共同好友可以这样实现</span></span><br><span class="line">sunion key1 key2 <span class="comment">#求两个集合中的并集 所有的，不包含</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>微博，A用户将所有关注的人放在一个set集合中！将它的粉丝也放在一个集合中！可以做共同关注、共同爱好、二度好友、推荐好友（六度分割）</p>
<h2 id="Hash（哈希）"><a href="#Hash（哈希）" class="headerlink" title="Hash（哈希）"></a>Hash（哈希）</h2><p>Map集合，key-map集合！这时候这个值是一个map集合！</p>
<p>set myhash field klay</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#set一个具体的key-value</span></span><br><span class="line">hset myhash field1 klay</span><br><span class="line"><span class="comment">#单个字段值</span></span><br><span class="line">hget myhash field1</span><br><span class="line"></span><br><span class="line"><span class="comment">#set多个key-value</span></span><br><span class="line">hmset myhash field1 hello field2 world</span><br><span class="line"><span class="comment">#获取多个字段值</span></span><br><span class="line">hmget myhash field1 field2</span><br><span class="line"></span><br><span class="line"><span class="comment">#获取全部的数据，key-value</span></span><br><span class="line">hgetall myhash</span><br><span class="line"></span><br><span class="line"><span class="comment">#删除hash指定的key字段！对应的value也就没有了</span></span><br><span class="line">hdel myhash field1</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看hash的长度</span></span><br><span class="line">hlen myhash</span><br><span class="line"></span><br><span class="line"><span class="comment">#判断hash中的指定字段是否存在</span></span><br><span class="line">hexists myhash field1</span><br><span class="line"></span><br><span class="line"><span class="comment">#获取hash所有的key</span></span><br><span class="line">hkeys myhash</span><br><span class="line"><span class="comment">#获取hash所有的值</span></span><br><span class="line">hvals myhash</span><br><span class="line"></span><br><span class="line"><span class="comment">#指定增量</span></span><br><span class="line">hincrby myhash field3 1</span><br><span class="line"><span class="comment">#指定减量</span></span><br><span class="line">hincrby myhash field3 -1</span><br><span class="line"><span class="comment">#如果不存在则设置field4，如果存在则不能设置</span></span><br><span class="line">hsetnx myhash field4 world</span><br></pre></td></tr></table></figure>

<p>hash可用于变更的数据，尤其是用户信息之类的，经常变动的信息！hash更适合宇对象的存储，String 更适合字符串</p>
<h2 id="ZSet（有序集合）"><a href="#ZSet（有序集合）" class="headerlink" title="ZSet（有序集合）"></a>ZSet（有序集合）</h2><p>在Set的基础上增加了一个值，zset k1 score v1</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#添加一个值</span></span><br><span class="line">zadd key 1 one</span><br><span class="line"><span class="comment">#添加多个值</span></span><br><span class="line">zadd key 2 two 3 three</span><br><span class="line"><span class="comment">#查看所有元素</span></span><br><span class="line">zrange salary 0 -1 </span><br><span class="line"></span><br><span class="line"><span class="comment">#排序如何实现？</span></span><br><span class="line">zadd salary 2500 xiaohong <span class="comment">#添加三个用户</span></span><br><span class="line">zadd salary 5000 zhangsan</span><br><span class="line">zadd salary 500 kuangshen</span><br><span class="line"><span class="comment">#正无穷-负无穷</span></span><br><span class="line">zrangebyscore salary -inf +inf <span class="comment">#显示全部的用户，从小到大</span></span><br><span class="line">zreverange salary 0 -1 <span class="comment">#从大到小进行排序</span></span><br><span class="line">zrangebyscore salary -inf +inf withscores <span class="comment">#显示全部的用户并且附带成绩</span></span><br><span class="line">zrangebyscore salary -inf 2500 withscores <span class="comment">#显示工资小于2500的员工的升序排列</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#移除元素</span></span><br><span class="line">zrem salary xiaohong <span class="comment">#移除指定元素</span></span><br><span class="line"><span class="comment">#获取集合中的个数</span></span><br><span class="line">zcard salary </span><br><span class="line"><span class="comment">#获取指定区间的成员数量</span></span><br><span class="line">zcount myset 1 3</span><br></pre></td></tr></table></figure>

<p>案例思路：存储班级成绩，工资表排序</p>
<p>普通消息，1 重要消息 2，带权重判定</p>
<p>排序行应用实现，取top N实现</p>
<h1 id="三种特殊数据类型"><a href="#三种特殊数据类型" class="headerlink" title="三种特殊数据类型"></a>三种特殊数据类型</h1><h2 id="geospatial（地理位置）"><a href="#geospatial（地理位置）" class="headerlink" title="geospatial（地理位置）"></a>geospatial（地理位置）</h2><p>朋友的定位，附件的人，打车距离计算</p>
<p>Redis的Geo在Redis3.2版本就推出了！这个功能可以推算地理位置的信息，两地之间的距离，方圆几里的人。</p>
<p>可以查询一些测试数据：<a target="_blank" rel="noopener" href="http://www.jsons.cn/lngcode/">http://www.jsons.cn/lngcode/</a></p>
<p>相关命令：</p>
<p><img src="/C:/Users\a\AppData\Roaming\Typora\typora-user-images\image-20210815231124232.png" alt="image-20210815231124232">    </p>
<blockquote>
<p>geoadd </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#添加地理位置</span></span><br><span class="line"><span class="comment">#规则：两极无法直接添加，我们一般会下载城市数据，直接通过java程序一次性导入！</span></span><br><span class="line"><span class="comment">#参数 key value（纬度 经度 名称）</span></span><br><span class="line"><span class="comment">#将指定的地理空间项（经度、纬度、名称）添加到指定的键。数据作为排序集存储在键中，这样就可以使用GEOSEARCH命令查询项目。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#该命令采用标准格式 x,y 的参数，因此必须在纬度之前指定经度。可编入索引的坐标有限制：非常靠近极点的区域不可编入索引。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#EPSG:900913 / EPSG:3785 / OSGEO:41001 指定的确切限制如下：</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#有效经度为 -180 到 180 度。</span></span><br><span class="line"><span class="comment">#有效纬度是从 -85.05112878 到 85.05112878 度。</span></span><br><span class="line">geoadd china:city 纬度 经度 城市名</span><br><span class="line"></span><br><span class="line">geoadd china:city 纬度 经度 城市名 纬度 经度 城市名</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>getpos</p>
</blockquote>
<p>获得当前定位：一定是一个坐标值！</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getpos china:city beijing <span class="comment">#获取指定城市的纬度和经度</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>geodist</p>
</blockquote>
<p>两地区之间的距离</p>
<p>单位：</p>
<ul>
<li>m表示米</li>
<li>km表示千米</li>
<li>mi表示英里</li>
<li>ft表示单位为英尺</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#两北京到上海的直线距离</span></span><br><span class="line">geodis china:city beijing shanghai km</span><br></pre></td></tr></table></figure>

<blockquote>
<p>georadius 以给定的经纬度为中心，找出某一半径内的元素</p>
</blockquote>
<p>我附件人？（获取所有附件的人的地址，定位！）通过半径来查询！</p>
<p>获取指定数量的人，200</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#找到方圆千里之间的城市，在集合中进行查找</span></span><br><span class="line">georadius china:city 110 30 1000 km</span><br></pre></td></tr></table></figure>



<h1 id="SpringBoot整合"><a href="#SpringBoot整合" class="headerlink" title="SpringBoot整合"></a>SpringBoot整合</h1><p>说明：在SpringBoot2.x之后，原来使用的jedis被替换为了lettuce</p>
<p>jedis：采用的直连，多个线程操作的话，是不安全的，如果想要避免不安全的，使用jedis pool连接池！BIO模式</p>
<p>lettuce：采用netty，实例可以再多个线程中进行共享，不存在线程不安全的情况！可以减少线程数据了，更像Nio模式</p>
<p>源码分析：</p>

      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="http://example.com/2024/10/16/redis/redis/" title="redis 学习笔记" target="_blank" rel="external">http://example.com/2024/10/16/redis/redis/</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>版权声明： </strong> 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</blockquote>


    </div>
  </article>
  
    
  <section id="comments">
  	
  </section>


  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/2024/10/24/MySQL/mysql-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" title="MySQL 常用命令"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a>
    </li>
    
    
    <li class="next">
      <a href="/2024/10/16/openGauss/opengauss%E5%91%BD%E4%BB%A4%E5%90%88%E9%9B%86/" title="oepnGauss 命令合集"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
    <li class="toggle-toc">
      <a class="toggle-btn " data-toggle="collapse" href="#collapseToc" aria-expanded="false" title="文章目录" role="button">    <span>[&nbsp;</span><span>文章目录</span>
        <i class="text-collapsed icon icon-anchor"></i>
        <i class="text-in icon icon-close"></i>
        <span>]</span>
      </a>
    </li>
    
  </ul>
  
  
  
  <div class="bar-right">
    
  </div>
  </div>
</nav>
  


</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/klay11K/klay11K.github.io" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        <div class="publishby">
        	Theme by <a href="https://github.com/cofess" target="_blank"> cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.
        </div>
    </div>
</footer>
  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>






   
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





   






</body>
</html>